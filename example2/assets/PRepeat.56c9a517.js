var e=Object.assign;import{d as a,K as t,x as r,C as l,a as n,o,b as d,F as s,i as u,m,w as i,e as p,j as c,B as k}from"./index.44837868.js";var y=a({components:{PIcon:t,PButton:r},name:"PRepeat",props:{modelValue:{type:Array,typeStr:"Array<T>",mark:"表单数组",required:!0},example:{type:[Object,Function],typeStr:"Object | (idx: number) => object",mark:"如果传入函数, 将在新增时调用, 获取新增项, 否则直接将example作为新增项(浅复制)",default:()=>({})},useLongButton:{type:Boolean,typeStr:"boolean",mark:"是否启用长按钮作为新增按钮",default:!1},disabled:{type:Boolean,typeStr:"boolean",mark:"预留字段, 暂未处理, 请勿使用",default:!1},useAdd:{type:Boolean,typeStr:"boolean",mark:"预留字段, 暂未处理, 请勿使用",default:!0}},emits:["add","remove","update:modelValue"],emitsMark:[{key:"update:modelValue",when:"无触发时机",param:"Array<T>",paramRemark:"由于数组不变性, 该函数永远不触发"},{key:"add",when:"当插入数据时触发",param:"T",paramRemark:"插入数据"},{key:"remove",when:"当移除数据时触发",param:"Number",paramRemark:"移除数据的序号, 在移除之前调用"}],slotsMark:[{key:"default",default:"",param:"{ data: T, index: number}",paramRemark:"data为数据项, index为序号",remark:"将会使用v-for循环, 必填"}],setup(a,t){const r=l(a,"modelValue",t.emit);return{value:r,add:()=>{return l=this,n=null,o=function*(){const l=a.example instanceof Function?yield a.example(r.value.length):e({},a.example);t.emit("add",l),r.value.push(l)},new Promise(((e,a)=>{var t=e=>{try{d(o.next(e))}catch(t){a(t)}},r=e=>{try{d(o.throw(e))}catch(t){a(t)}},d=a=>a.done?e(a.value):Promise.resolve(a.value).then(t,r);d((o=o.apply(l,n)).next())}));var l,n,o},remove:e=>{t.emit("remove",e),r.value.splice(e,1)}}}});const v={class:"p-repeat"},b=k("请主动渲染"),f=p("span",null,null,-1);y.render=function(e,a,t,r,l,k){var y;const x=n("p-icon"),h=n("p-button");return o(),d("div",v,[(null==(y=e.value)?void 0:y.length)?(o(!0),d(s,{key:0},u(e.value,((a,t)=>(o(),d(s,null,[e.disabled?m("",!0):(o(),d(h,{key:0,circle:"",minor:"",usePadding:"",onClick:a=>e.remove(t)},{default:i((()=>[p(x,{class:"pop-jian"})])),_:2},1032,["onClick"])),c(e.$slots,"default",{index:t,data:a},(()=>[b]))],64)))),256)):m("",!0),!e.disabled&&e.useAdd?(o(),d(s,{key:1},[e.useLongButton?(o(),d(s,{key:1},[f,p(h,{minor:"",usePadding:"",style:{width:"100%"},onClick:e.add},{default:i((()=>[p(x,{class:"pop-jia"})])),_:1},8,["onClick"])],64)):(o(),d(h,{key:0,circle:"",minor:"",usePadding:"",onClick:e.add},{default:i((()=>[p(x,{class:"pop-jia"})])),_:1},8,["onClick"]))],64)):m("",!0)])};export{y as _};
