var e=Object.assign;import{d as l,K as a,C as t,t as s,n as o,P as i,L as n,c as u,f as r,Q as d,a as p,M as v,l as c,o as y,b as m,e as h,R as f,w as k,F as b,i as g,N as w,S as O,m as S,T as C,k as x}from"./index.44837868.js";/* empty css              */import{_ as V}from"./PScroll.834b28d9.js";import{_ as A}from"./PInput.b9269c14.js";function T({value:e,options:l,disabled:a,multiple:t}){const s=u((()=>{var a,t;return null!=(t=null==(a=l.value.find((l=>l.key===e.value)))?void 0:a.label)?t:e.value})),o=r(!1);return{label:s,showOptions:o,toggleShow:()=>{a.value||(o.value=!o.value)},handleChoose:a=>{if(1===t.value)e.value=a.key,o.value=!1;else if(Array.isArray(e.value)){const l=e.value.indexOf(a.key);l>-1?e.value.splice(l,1):e.value.length>=t.value?d(`您最多选择${t.value}个`):(e.value.push(a.key),e.value.length>=t.value&&(o.value=!1))}else l.value.find((l=>l.key===e.value))?(e.value=e.value===a.key?[]:[e.value,a.key],e.value.length>=t.value&&(o.value=!1)):e.value=[a.key]},isInValue:l=>Array.isArray(e.value)?e.value.includes(l.key):e.value===l.key}}var j=l({components:{PScroll:V,PInput:A,PIcon:a},name:"PSelect",inheritAttrs:!1,props:{disabled:{type:Boolean,typeStr:"boolean",mark:"是否禁用",default:!1},modelValue:{type:null,typeStr:"T[] | T",mark:"选中值对应的key或key数组",default:""},options:{type:Array,typeStr:"Option<T>[]",mark:"选项",default:[],validator:e=>e.every((e=>void 0!==(null==e?void 0:e.key)&&!Array.isArray(e.key)))},maxShowOptions:{type:Number,typeStr:"number",mark:"下拉框最多显示条数",default:5},multiple:{type:Number,typeStr:"number",mark:"选择数量上限, 当为1时为单选, 且modelValue返回不为数组",default:1,validator:e=>e>0},noBorder:{type:Boolean,typeStr:"boolean",mark:"去除外边框, 一般用于嵌套",default:!1}},emits:["update:modelValue"],emitsMark:[{key:"update:modelValue",when:"当选中值变化时触发",param:"T | T[]",paramRemark:"单选返回T, 多选返回T[], 取决于multiple"}],setup(l,a){const u=t(l,"modelValue",a.emit),r=T({value:u,options:s(l,"options"),disabled:s(l,"disabled"),multiple:s(l,"multiple")}),{value:d}=o(),{left:p,top:v,width:c,height:y,resize:m}=i(d);return e(e({},r),{value:u,inputRef:d,handleClick:e=>{l.disabled||(m(),r.toggleShow())},handleClickOutSideOptions:e=>{var l;(null==(l=d.value)?void 0:l.contains(e.target))||(r.showOptions.value=!1)},left:p,top:v,width:c,height:y,transformClassToObject:n})}});const I={class:"p-dropdown-icon center"},P={class:"fl-1 fl fl-a-c",style:{height:"100%"}},_={key:0};j.render=function(l,a,t,s,o,i){const n=p("p-icon"),u=p("p-input"),r=p("p-scroll"),d=v("click-out-side"),V=v("wave");return c((y(),m("div",{ref:"inputRef",class:["p-select",e(e({},l.transformClassToObject(l.$attrs.class)),{active:l.showOptions,disabled:l.disabled,"p-select-multiple":l.multiple>1,noBorder:l.noBorder})],style:l.$attrs.style,onClick:a[1]||(a[1]=(...e)=>l.handleClick&&l.handleClick(...e))},[h(u,w(e(e({},l.$attrs),{class:void 0,style:void 0}),{disabledInput:!0,modelValue:l.label,active:l.showOptions,disabled:l.disabled}),f({suffix:k((()=>[h("div",I,[h(n,{class:"pop-left-arrow",style:{transform:l.showOptions?"rotateX(0deg) rotateZ(90deg)":"rotateX(180deg) rotateZ(90deg)"}},null,8,["style"])])])),_:2},[l.multiple>1?{name:"inputSuffix",fn:k((()=>[h("div",P,[(y(!0),m(b,null,g(l.options,(e=>(y(),m(b,{key:e.key},[l.isInValue(e)?(y(),m("div",{key:0,class:"p-select-multiple-item fl fl-a-c fl-j-sb",onClick:a=>l.handleChoose(e)},[h("span",null,x(e.label),1),h(n,{class:"pop-guanbi"})],8,["onClick"])):S("",!0)],64)))),128))])]))}:void 0]),1040,["modelValue","active","disabled"]),(y(),m(O,{to:"body"},[h(C,{name:"slide"},{default:k((()=>{var e;return[l.showOptions?c((y(),m(r,{key:0,class:"p-select-dropdown-options shadow",style:{left:l.left+"px",top:l.top+l.height+4+"px",width:l.width+"px",height:(null==(e=l.options)?void 0:e.length)>=l.maxShowOptions?32*l.maxShowOptions+4+"px":32*l.options.length+4+"px"}},{default:k((()=>[h("div",null,[(y(!0),m(b,null,g(l.options,(e=>(y(),m("div",{key:e.key,class:"p-select-dropdown-option fl fl-a-c fl-j-sb",onClick:a=>l.handleChoose(e),style:{backgroundColor:l.isInValue(e)?"var(--aux-color-2)":void 0,cursor:Array.isArray(l.value)&&l.value.length>=l.multiple&&!l.value.includes(e.key)?"not-allowed":void 0}},[h("span",null,x(e.label),1),l.multiple>1&&l.isInValue(e)?(y(),m("div",_,[h(n,{class:"pop-gou"})])):S("",!0)],12,["onClick"])))),128))])])),_:1},8,["style"])),[[d,l.handleClickOutSideOptions]]):S("",!0)]})),_:1})]))],6)),[[V]])};export{j as _,T as u};
