var e=Object.assign;import{d as l,n as o,c as t,f as r,p as s,q as a,s as n,o as u,b as i,e as c,j as v,m as d}from"./index.44837868.js";var p=l({name:"PScroll",props:{useX:{type:Boolean,typeStr:"boolean",mark:"是否使用X轴滚动条",default:!1},useY:{type:Boolean,typeStr:"boolean",mark:"是否使用Y轴滚动条",default:!0},childClass:{type:null,typeStr:"object",mark:"由于结构复杂, 该值将传递给slot上一层class"},childStyle:{type:null,typeStr:"object",mark:"由于结构复杂, 该值将传递给slot上一层style"},scrollWidth:{type:String,typeStr:"string",mark:"滚动条宽度",default:"4px"},initalScrollLeft:{type:Number,typeStr:"number",mark:"初始化横向滚动条位置, 单位px",default:0},initalScrollTop:{type:Number,typeStr:"number",mark:"初始化纵向滚动条位置, 单位px",default:0}},setup(l,u){const{value:i}=o(),{value:c}=o(),v=function({scroll:e,scrollWarp:l}){const o=r(0),t=r(0),u=r(0),i=r(0),c=s((function(){if(!e.value||!l.value)return;const r=l.value.firstElementChild;if(!r)return;const s=e.value.offsetHeight,a=r.clientHeight,n=l.value.scrollTop;s<a&&(u.value=100*s/a,i.value=100*n/a);const c=e.value.offsetWidth,v=r.clientWidth,d=l.value.scrollLeft;c<v&&(o.value=100*c/v,t.value=100*d/v)}),16);return a((()=>{var e;null==(e=l.value)||e.addEventListener("scroll",c),window.addEventListener("resize",c),c()})),n((()=>{var e;null==(e=l.value)||e.removeEventListener("scroll",c),window.removeEventListener("resize",c)})),{scrollXWidth:o,scrollXLeft:t,scrollYHeight:u,scrollYTop:i,update:c}}({scroll:i,scrollWarp:c});return e(e(e({scroll:i,scrollWarp:c},v),function({scrollXWidth:e,scrollYHeight:l,scrollWarp:r,update:u,initalScrollLeft:i,initalScrollTop:c}){const{value:v}=o(),{value:d}=o(),p=s((function(l){v.value&&r.value&&e.value&&(r.value.scrollLeft=v.value[1]+100*(l.clientX-v.value[0])/e.value,u(),l.stopImmediatePropagation(),l.preventDefault())}),16),m=s((function(e){d.value&&r.value&&l.value&&(r.value.scrollTop=d.value[1]+100*(e.clientY-d.value[0])/l.value,u(),e.stopImmediatePropagation(),e.preventDefault())}),16),h=function(e){v.value=d.value=null};return a((()=>{var e;document.addEventListener("mousemove",p,!0),document.addEventListener("mousemove",m,!0),document.addEventListener("mouseup",h,!0),null==(e=r.value)||e.scrollTo(i,c)})),n((()=>{document.removeEventListener("mousemove",p,!0),document.removeEventListener("mousemove",m,!0),document.removeEventListener("mouseup",h,!0)})),{moving:t((()=>!(!v.value&&!d.value))),onMouseDownX:function(e){r.value&&(v.value=[e.clientX,r.value.scrollLeft],e.stopImmediatePropagation(),e.preventDefault())},onMouseMoveX:p,onMouseDownY:function(e){r.value&&(d.value=[e.clientY,r.value.scrollTop],e.stopImmediatePropagation(),e.preventDefault())},onMouseMoveY:m}}({update:v.update,scrollWarp:c,scrollXWidth:v.scrollXWidth,scrollYHeight:v.scrollYHeight,initalScrollLeft:l.initalScrollLeft,initalScrollTop:l.initalScrollTop})),{handleWheel:e=>{var o;l.useX&&!l.useY&&(null==(o=c.value)||o.scrollBy(120*Math.sign(e.deltaY),0))}})}});p.render=function(l,o,t,r,s,a){return u(),i("div",{class:"p-scroll",ref:"scroll",onWheel:o[3]||(o[3]=(...e)=>l.handleWheel&&l.handleWheel(...e))},[c("div",{class:["p-scroll-wrap",l.childClass],ref:"scrollWarp",style:e(e({},l.childStyle),{overflow:`${l.useX?"scroll":"hidden"} ${l.useY?"scroll":"hidden"}`,bottom:l.useX?"-17px":"0",right:l.useY?"-17px":"0","scroll-behavior":l.moving?void 0:"smooth"})},[v(l.$slots,"default",{update:l.update,scrollRef:l.scrollWarp})],6),l.useX?(u(),i("div",{key:0,class:"p-scroll-bar-x",style:{width:l.scrollXWidth+"%",left:l.scrollXLeft+"%",height:l.scrollWidth,borderRadius:l.scrollWidth},onMousedown:o[1]||(o[1]=(...e)=>l.onMouseDownX&&l.onMouseDownX(...e))},null,36)):d("",!0),l.useY?(u(),i("div",{key:1,class:"p-scroll-bar-y",style:{height:l.scrollYHeight+"%",top:l.scrollYTop+"%",width:l.scrollWidth,borderRadius:l.scrollWidth},onMousedown:o[2]||(o[2]=(...e)=>l.onMouseDownY&&l.onMouseDownY(...e))},null,36)):d("",!0)],544)};export{p as _};
