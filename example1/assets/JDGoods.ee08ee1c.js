var e=Object.defineProperty,l=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,t=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,r=(e,r)=>{for(var s in r||(r={}))l.call(r,s)&&t(e,s,r[s]);if(a)for(var s of a(r))o.call(r,s)&&t(e,s,r[s]);return e};import{d as s,r as i,g as n,D as d,v as u,w as p,f as g,h as c,o as m,a as f,b as h,i as v,j as y,F as b,e as x,t as j,k as P,l as V}from"./index.8a677f61.js";import{g as D}from"./refUtil.896e56f6.js";import{_ as w}from"./GoodsDetail.0d729af0.js";import"./vendor.be7200f3.js";var F=s({components:{GoodsDetail:w},name:"JDGoods",setup(){const e=i(!1);return r(r({loading:e},function({loading:e}){const l=n({startPrice:"",endPrice:"",goodsPool:"",goodsName:""}),a=i(0),o=i([]),t=i(1),r=i(10),s=()=>{e.value=!0,d.get("/api/jdgoods",{params:l}).then((({data:e})=>{console.log(e),e.success?(o.value=e.data.list,a.value=e.data.total):u.error(e.msg)})).catch((e=>{u.error(e.toString())})).finally((()=>{e.value=!1}))};return p(t,s),p(r,(()=>{1===t.value?s():t.value=1})),s(),{pageNum:t,pageSize:r,total:a,searchForm:l,handleSearch:s,list:o}}({loading:e})),function({loading:e}){const l=D();return{goodsDetail:l,handleDetail:e=>{l.value=e}}}({loading:e}))}});const _={style:{padding:"30px"}},z=h("span",{style:{margin:"0 10px"}},"至",-1),U=V("搜索"),N={class:"fl fl-w fl-j-sb"},S={class:"flc jdgoods-item"},k={style:{margin:"10px 0"}},O=V("添加到备选库"),C={style:{width:"192px","margin-right":"12px",height:"0"}};F.render=function(e,l,a,o,t,r){const s=g("el-input-number"),i=g("el-form-item"),n=g("el-option"),d=g("el-select"),u=g("el-input"),p=g("el-button"),V=g("el-form"),D=g("el-image"),w=g("el-pagination"),F=g("goods-detail"),G=g("el-dialog"),E=c("loading");return m(),f(b,null,[h("div",_,[h(V,{inline:!0,model:e.searchForm,class:"fl fl-w fl-j-sb jdgoods-search-form"},{default:v((()=>[h(i,{label:"价格区间"},{default:v((()=>[h(s,{modelValue:e.searchForm.startPrice,"onUpdate:modelValue":l[1]||(l[1]=l=>e.searchForm.startPrice=l),placeholder:"最低价",style:{width:"120px"},"controls-position":"right"},null,8,["modelValue"]),z,h(s,{modelValue:e.searchForm.endPrice,"onUpdate:modelValue":l[2]||(l[2]=l=>e.searchForm.endPrice=l),placeholder:"最高价",style:{width:"120px"},"controls-position":"right"},null,8,["modelValue"])])),_:1}),h(i,{label:"商品池"},{default:v((()=>[h(d,{modelValue:e.searchForm.goodsPool,"onUpdate:modelValue":l[3]||(l[3]=l=>e.searchForm.goodsPool=l)},{default:v((()=>[h(n,{label:"选项1",value:"1"}),h(n,{label:"选项2",value:"2"})])),_:1},8,["modelValue"])])),_:1}),h(i,{label:"商品名称"},{default:v((()=>[h(u,{modelValue:e.searchForm.goodsName,"onUpdate:modelValue":l[4]||(l[4]=l=>e.searchForm.goodsName=l),placeholder:"商品名称"},null,8,["modelValue"])])),_:1}),h(i,null,{default:v((()=>[h(p,{type:"primary",onClick:e.handleSearch,loading:e.loading},{default:v((()=>[U])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model"]),y(h("div",N,[(m(!0),f(b,null,x(e.list,(l=>(m(),f("div",S,[h(D,{style:{width:"150px",height:"150px",cursor:"pointer"},src:l.pic,fit:"cover",onClick:a=>e.handleDetail(l)},null,8,["src","onClick"]),h("span",k,j(l.goodsName),1),h("span",null,"价格: "+j(l.totalPrice)+"元",1),h(p,{plain:"",size:"small",style:{"margin-top":"20px"}},{default:v((()=>[O])),_:1})])))),256)),(m(),f(b,null,x(6,(e=>h("div",C))),64))],512),[[E,e.loading]]),h(w,{style:{"margin-top":"20px","text-align":"right"},"current-page":e.pageNum,"onUpdate:current-page":l[5]||(l[5]=l=>e.pageNum=l),"page-size":e.pageSize,"onUpdate:page-size":l[6]||(l[6]=l=>e.pageSize=l),layout:"total, sizes, prev, pager, next, jumper",total:e.total,"prev-text":"上一页","next-text":"下一页"},null,8,["current-page","page-size","total"])]),h(G,{title:"商品详情","model-value":!!e.goodsDetail,"onUpdate:modelValue":l[8]||(l[8]=()=>e.goodsDetail=null),width:"80%"},{default:v((()=>{var a;return[(null==(a=e.goodsDetail)?void 0:a.id)?(m(),f(F,{key:0,id:e.goodsDetail.id,onClose:l[7]||(l[7]=()=>e.goodsDetail=null)},null,8,["id"])):P("",!0)]})),_:1},8,["model-value"])],64)};export default F;
