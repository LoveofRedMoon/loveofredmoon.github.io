var e=Object.defineProperty,l=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,a=(l,o,n)=>o in l?e(l,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[o]=n,r=(e,r)=>{for(var t in r||(r={}))l.call(r,t)&&a(e,t,r[t]);if(o)for(var t of o(r))n.call(r,t)&&a(e,t,r[t]);return e};import{d as t,r as i,u as s,v as u,D as d,f as p,o as c,a as g,b as m,i as v,l as y}from"./index.8a677f61.js";import"./vendor.be7200f3.js";function f({loading:e}){const l=i(""),o=i(""),n=s();return{username:l,password:o,login:()=>{return a=this,r=null,t=function*(){const a=l.value.length<6?"用户名过短!":o.value.length<6?"密码过短!":"";if(a)return u.error(a);if(e.value)return u.warning("正在登陆中, 请不要着急...");e.value=!0;try{const a=yield d.post("/api/login",{username:l.value,password:o.value});a.data.success?n.push({path:"/"}):u.error(a.data.msg)}catch(r){u.error(r.toString())}finally{e.value=!1}},new Promise(((e,l)=>{var o=e=>{try{i(t.next(e))}catch(o){l(o)}},n=e=>{try{i(t.throw(e))}catch(o){l(o)}},i=l=>l.done?e(l.value):Promise.resolve(l.value).then(o,n);i((t=t.apply(a,r)).next())}));var a,r,t}}}var h=t({name:"Login",setup(){const e=i(!1),l=f({loading:e});return r(r({loading:e},l),{handleLogin:e=>{var o,n;"enter"===(null==(n=null==(o=null==e?void 0:e.key)?void 0:o.toLowerCase)?void 0:n.call(o))&&l.login()}})}});const b={id:"login-cover"},w={id:"login",class:"flc fl-a-c"},x=m("div",{class:"login-pic",style:{"margin-bottom":"55px"}},null,-1),j=y("登录");h.render=function(e,l,o,n,a,r){const t=p("el-input"),i=p("el-button");return c(),g("div",b,[m("div",w,[x,m(t,{class:"login-input",style:{"margin-bottom":"33px"},placeholder:"用户名","prefix-icon":"el-icon-user-solid",modelValue:e.username,"onUpdate:modelValue":l[1]||(l[1]=l=>e.username=l)},null,8,["modelValue"]),m(t,{class:"login-input",style:{"margin-bottom":"58px"},placeholder:"密码","prefix-icon":"el-icon-lock",type:"password",onKeypress:e.handleLogin,modelValue:e.password,"onUpdate:modelValue":l[2]||(l[2]=l=>e.password=l)},null,8,["onKeypress","modelValue"]),m(i,{type:"primary",round:"",style:{width:"374px"},onClick:e.login,loading:e.loading},{default:v((()=>[j])),_:1},8,["onClick","loading"])])])};export default h;
