var e=Object.defineProperty,o=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.propertyIsEnumerable,i=(o,a,l)=>a in o?e(o,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[a]=l,t=(e,t)=>{for(var s in t||(t={}))o.call(t,s)&&i(e,s,t[s]);if(a)for(var s of a(t))l.call(t,s)&&i(e,s,t[s]);return e};import{d as s,m as n,r as d,D as r,v as c,w as f,N as g,f as p,h as u,j as y,o as m,a as v,b as D,t as h,k as x,i as b,F as k,l as C}from"./index.8a677f61.js";import{g as G}from"./refUtil.896e56f6.js";var M=s({name:"GoodsDetail",props:{id:{type:String,required:!0}},emits:["close"],setup(e,o){const a=n(e,"id"),l=d(!1),i=function({goodsId:e,loading:o}){const a=G(),l=()=>(o.value=!0,r.get("/api/goods/"+e.value).then((({data:e})=>{e.success?a.value=e.data:c.error(e.msg)})).catch((e=>{c.error("加载订单详情失败! "+e.toString())})).finally((()=>{o.value=!1})));return f(e,l,{immediate:!0}),{goodsDetail:a,loadGoodsDetail:l}}({goodsId:a,loading:l});return t(t(t(t({loading:l,goodsId:a},i),function({loading:e,goodsDetail:o,loadGoodsDetail:a}){const l=d(""),i=d(!1);return f(o,(e=>{e&&(l.value=e.totalPrice)})),{price:l,priceModifyFlag:i,handleConfirmModify:()=>o.value?(e.value=!0,r.put("/api/price/"+o.value.id,{price:l.value}).then((({data:e})=>{e.success?(c.success("定价修改成功!"),i.value=!1):c.error(e.msg)})).catch((e=>{c.error(e.toString())})).finally((()=>{e.value=!1,a()}))):c.error("商品详情还未获取成功, 请稍后再试!")}}({loading:l,goodsDetail:i.goodsDetail,loadGoodsDetail:i.loadGoodsDetail})),function({loading:e,goodsDetail:o,loadGoodsDetail:a}){const l=d(!1),i=d(!1);return f(o,(e=>{e&&(l.value=e.offline)})),{offline:l,offlineModifyFlag:i,handleConfirmModifyOffline:()=>o.value?(e.value=!0,r.put("/api/offline/"+o.value.id,{offline:l.value}).then((({data:e})=>{e.success?(c.success(`商品${l.value?"下架":"上架"}成功!`),i.value=!1):c.error(e.msg)})).catch((e=>{c.error(e.toString())})).finally((()=>{e.value=!1,a()}))):c.error("商品详情还未获取成功, 请稍后再试!")}}({loading:l,goodsDetail:i.goodsDetail,loadGoodsDetail:i.loadGoodsDetail})),function({loading:e,goodsDetail:o,emit:a,loadGoodsDetail:l}){return{handleDeleteGoods:()=>{g.confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{if(o.value)return e.value=!0,r.delete("/api/goods/"+o.value.id).then((({data:e})=>{e.success?(c.success("商品删除成功!"),a("close")):c.error(e.msg)})).catch((e=>{c.error(e.toString())})).finally((()=>{e.value=!1,l()}));c.error("商品详情还未获取成功, 请稍后再试!")})).catch((()=>{}))}}}({loading:l,goodsDetail:i.goodsDetail,loadGoodsDetail:i.loadGoodsDetail,emit:o.emit}))}});const w={style:{padding:"30px"},class:"fl"},F={key:0,class:"flc"},O={class:"goodsdetail-item",style:{"font-size":"24px","font-weight":"700"}},S={class:"goodsdetail-item",style:{"font-size":"16px","font-weight":"700"}},j={class:"goodsdetail-item",style:{"font-size":"14px"}},z={class:"goodsdetail-item",style:{"font-size":"14px"}},_={class:"flc",style:{"margin-left":"30px"}},P=D("span",{style:{"font-size":"20px"}},"售价",-1),I={style:{"margin-top":"20px"}},V=C("修改"),N=C("确认"),U=D("span",{style:{"font-size":"20px","margin-top":"20px"}},"上下架管理",-1),B={style:{"margin-top":"20px"}},T=C("修改"),q=C("确认"),E=D("span",{style:{"font-size":"20px","margin-top":"20px",color:"red"}},"删除",-1),$={style:{"margin-top":"20px"}},A=C("确认删除");M.render=function(e,o,a,l,i,t){var s;const n=p("el-image"),d=p("el-input-number"),r=p("el-button"),c=p("el-switch"),f=u("loading");return y((m(),v("div",w,[e.goodsDetail?(m(),v("div",F,[D(n,{style:{width:"402px",height:"292px"},src:e.goodsDetail.pic},null,8,["src"]),D("span",O,h(e.goodsDetail.goodsName),1),D("span",S,h(e.goodsDetail.brandName),1),D("span",j,h(e.goodsDetail.costPrice)+"元   库存"+h(e.goodsDetail.count)+"个   商品状态: "+h(e.goodsDetail.goodsStateStr),1),D("span",z,"包装清单: "+h(e.goodsDetail.packContents),1)])):x("",!0),D("div",_,[P,D("div",I,[D(d,{modelValue:e.price,"onUpdate:modelValue":o[1]||(o[1]=o=>e.price=o),"controls-position":"right",precision:2,min:0,disabled:!e.priceModifyFlag,style:{"margin-right":"20px"}},null,8,["modelValue","disabled"]),e.priceModifyFlag?(m(),v(r,{key:1,type:"primary",onClick:e.handleConfirmModify},{default:b((()=>[N])),_:1},8,["onClick"])):(m(),v(r,{key:0,plain:"",onClick:o[2]||(o[2]=()=>e.priceModifyFlag=!0)},{default:b((()=>[V])),_:1}))]),U,D("div",B,[D(c,{"model-value":!e.offline,"onUpdate:modelValue":o[3]||(o[3]=o=>e.offline=!o),"active-text":"上架","inactive-text":"下架",disabled:!e.offlineModifyFlag,style:{"margin-right":"20px"}},null,8,["model-value","disabled"]),e.offlineModifyFlag?(m(),v(r,{key:1,type:"primary",onClick:e.handleConfirmModifyOffline},{default:b((()=>[q])),_:1},8,["onClick"])):(m(),v(r,{key:0,plain:"",onClick:o[4]||(o[4]=()=>e.offlineModifyFlag=!0)},{default:b((()=>[T])),_:1}))]),(null==(s=e.goodsDetail)?void 0:s.offline)?(m(),v(k,{key:0},[E,D("div",$,[D(r,{type:"danger",onClick:e.handleDeleteGoods},{default:b((()=>[A])),_:1},8,["onClick"])])],64)):x("",!0)])],512)),[[f,e.loading]])};export{M as _};
